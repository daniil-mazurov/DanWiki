>[!important] imports
>```python
>from sqlalchemy import insert, select, update
>```
# SELECT
Запрос
```sql
SELECT * FROM tablename
```

Императивный стиль (Core):
```python
query = select(my_table)

result = connection.execute(query)
```
- **my_table** - Объект таблицы в императивном стиле [[Работа с таблицами#^f50dcc]]

Декларативный стиль (ORM):
```python
query = select(ExampleTypes)

result = session.execute(query)
```
- **ExampleTable** - Объект таблицы в декларативном стиле [[Работа с таблицами#^3677ec]]
# INSERT
Запрос
```sql
INSERT INTO tablename (colname) VALUES 
	('first_val'),
	('second_val');
```
```python
connection.execute(text(sql_request))
connection.commit()
```

Императивный стиль (Core):
```python
statement = insert(my_table).values(
		[
			{"first_col": "first_val"},
			{"first_col": "second_val"},
		]
	)

connection.execute(statement)
connection.commit()
```
- **my_table** - Объект таблицы в императивном стиле [[Работа с таблицами#^f50dcc]]

Декларативный стиль (ORM):
```python
data_obj = ExampleTable(first_col="value")

session.add_all(
	[
		first_data_obj,
	]
) 

session.commit()
```
- **ExampleTable** - Объект таблицы в декларативном стиле [[Работа с таблицами#^3677ec]]
# UPDATE
Запрос
```sql
UPDATE tablename_old SET first_col=:new_value WHERE id=:id
```

> [!info] Подстановка значений в SQL запрос
> SQL запрос не должен содержать прямой подстановки параметров (либо подстановки через f-строку)
> ```python
> stmt = text("UPDATE tablename_old SET first_col=:new_value WHERE id=:id")
> stmt = stmt.bindparams(id=id, new_value=new_value) 
> ```

Императивный стиль (Core):
```python
stmt = update(my_table).values(first_col=new_value).filter_by(id=id)

connection.execute(stmt)
connection.commit()
```
- **my_table** - Объект таблицы в императивном стиле [[Работа с таблицами#^f50dcc]]
- **filter_by** - упрощенный аналог команды `WHERE`

Декларативный стиль (ORM):
```python
first_data_obj = session.get(ExampleTypes, {"id": 3})
first_data_obj.maybe_none_val = "new_val"

session.commit()
```
- **ExampleTable** - Объект таблицы в декларативном стиле [[Работа с таблицами#^3677ec]]
- Метод `get` должен принимать первичный ключ, и, следовательно, может получать только один объект за раз